<!doctype html>
<html lang="en">
  <head>
    <title>Daily Portal</title>
  </head>

  <body>
    <h2>Current time</h2>
      <p>Paris: {{ ftime }} </p>
      <p>Tokyo: {{ jtime }} </p>
      <p>Montréal: {{ qtime }} </p>


    <h2>Weather forecast</h2>
      {% for city in wforecasts %}
        <p>{{ city }}:</p>
        <ul>
          {% for datetime in wforecasts[city] %}
            <li>
              {{ datetime }}<br>
              {{ wforecasts[city][datetime] }}
            </li>
          {% endfor %}
        </ul>
      {% endfor %}
      <img src="/weather.png" />


    <h2>RATP info</h2>
      <p>Next train in Sceaux station: </p>
      {# <p>{{ horaire }}</p> #}

      {% set listindex = {} %}
      {% for t in trains.heures_passage if t == "Heure de passage" %}
            {% set _ = listindex.update({'index' : trains.heures_passage.index(t)}) %}
      {% endfor %}
      {# devrait être calculé par la classe TrainInfo #}

      <ul>
      {% for d in trains.directions %}
          <li>
          {{ d }}:
              {% if d == 'Charles-de-Gaulle. Mitry-Claye.' %}
                  {% for times1 in trains.heures_passage[:listindex['index']] %}
                      {{ times1 }}
                  {% endfor %}
              {% else %}
                  {% for times2 in trains.heures_passage[listindex['index']+1:] %}
                      {{ times2 }}
                  {% endfor %}
              {% endif %}
          </li>
      {% endfor %}
      </ul>
  </body>
</html>
